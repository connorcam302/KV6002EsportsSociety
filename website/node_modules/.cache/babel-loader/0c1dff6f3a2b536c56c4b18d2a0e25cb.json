{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Connor\\\\Documents\\\\School\\\\University\\\\Third Year\\\\Team Project\\\\KV6002EsportsSociety\\\\website\\\\src\\\\components\\\\LoginPage.js\";\nimport React from \"react\";\nimport Login from \"./Login\";\nimport Logout from \"./Logout\";\nimport RegisterLink from \"./RegisterLink\";\nimport Grid from '@mui/material/Grid';\nimport { Box } from \"@mui/system\";\nimport { TwitchChat } from \"react-twitch-embed\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleEmail = e => {\n      this.setState({\n        email: e.target.value\n      });\n    };\n\n    this.handlePassword = e => {\n      this.setState({\n        password: e.target.value\n      });\n    };\n\n    this.handleLogoutClick = () => {\n      this.setState({\n        authenticated: false,\n        token: null\n      });\n      localStorage.removeItem('UserLoginToken');\n    };\n\n    this.handleLoginClick = () => {\n      let url = \"http://unn-w18001798.newnumyspace.co.uk/KV6002/Assessment/api/userlogin\";\n      let formData = new FormData();\n      formData.append('user_email', this.state.email);\n      formData.append('user_password', this.state.password);\n      fetch(url, {\n        method: 'POST',\n        headers: new Headers(),\n        body: formData\n      }).then(response => {\n        if (response.status === 200) {\n          return response.json();\n        } else {\n          throw Error(response.statusText);\n        }\n      }).then(data => {\n        if (\"token\" in data.results) {\n          this.setState({\n            authenticated: true,\n            token: data.results.token\n          });\n          localStorage.setItem('UserLoginToken', data.results.token);\n        }\n      }).catch(err => {\n        console.log(\"something went wrong \", err);\n      });\n    };\n\n    this.state = {\n      authenticated: false,\n      token: null,\n      email: \"\",\n      password: \"\"\n    };\n    this.handleEmail = this.handleEmail.bind(this);\n    this.handlePassword = this.handlePassword.bind(this);\n    this.handleLoginClick = this.handleLoginClick.bind(this);\n    this.handleLogoutClick = this.handleLogoutClick.bind(this);\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('UserLoginToken')) {\n      this.setState({\n        authenticated: true,\n        token: localStorage.getItem('UserLoginToken')\n      });\n    }\n  }\n\n  render() {\n    let page = /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        flexGrow: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Please enter your details to log into your account.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 4\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 4,\n          sx: {\n            justifyContent: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Login, {\n            handleEmail: this.handleEmail,\n            handlePassword: this.handlePassword,\n            handleLoginClick: this.handleLoginClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(RegisterLink, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 4\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TwitchEmbed, {\n        channel: \"moonstar_x\",\n        id: \"moonstar_x\",\n        theme: \"dark\",\n        muted: true,\n        onVideoPause: () => console.log(':(')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TwitchChat, {\n        channel: \"moonstar_x\",\n        theme: \"dark\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TwitchClip, {\n        clip: \"WealthyBumblingKimchiItsBoshyTime\",\n        parent: ['mycoolsite.com, anotherawesomesite.net']\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TwitchPlayer, {\n        video: \"333014765\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this);\n\n    if (this.state.authenticated) {\n      page = /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"You're logged in, let's get gaming!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Logout, {\n          handleLogoutClick: this.handleLogoutClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: page\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default LoginPage;","map":{"version":3,"sources":["C:/Users/Connor/Documents/School/University/Third Year/Team Project/KV6002EsportsSociety/website/src/components/LoginPage.js"],"names":["React","Login","Logout","RegisterLink","Grid","Box","TwitchChat","LoginPage","Component","constructor","props","handleEmail","e","setState","email","target","value","handlePassword","password","handleLogoutClick","authenticated","token","localStorage","removeItem","handleLoginClick","url","formData","FormData","append","state","fetch","method","headers","Headers","body","then","response","status","json","Error","statusText","data","results","setItem","catch","err","console","log","bind","componentDidMount","getItem","render","page","flexGrow","justifyContent"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Login from \"./Login\";\r\nimport Logout from \"./Logout\";\r\nimport RegisterLink from \"./RegisterLink\";\r\nimport Grid from '@mui/material/Grid';\r\nimport { Box } from \"@mui/system\";\r\nimport { TwitchChat } from \"react-twitch-embed\";\r\n\r\n\r\nclass LoginPage extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            authenticated: false,\r\n            token: null,\r\n            email: \"\",\r\n            password: \"\"\r\n        }\r\n        this.handleEmail = this.handleEmail.bind(this);\r\n        this.handlePassword = this.handlePassword.bind(this);\r\n        this.handleLoginClick = this.handleLoginClick.bind(this);\r\n        this.handleLogoutClick = this.handleLogoutClick.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (localStorage.getItem('UserLoginToken')) {\r\n            this.setState({\r\n                authenticated: true,\r\n                token: localStorage.getItem('UserLoginToken')\r\n            });\r\n        }\r\n    }\r\n\r\n    handleEmail = (e) => {\r\n        this.setState({ email: e.target.value })\r\n    }\r\n\r\n    handlePassword = (e) => {\r\n        this.setState({ password: e.target.value })\r\n    }\r\n\r\n    handleLogoutClick = () => {\r\n        this.setState(\r\n            {\r\n                authenticated: false,\r\n                token: null\r\n            }\r\n        )\r\n        localStorage.removeItem('UserLoginToken');\r\n    }\r\n\r\n    handleLoginClick = () => {\r\n        let url = \"http://unn-w18001798.newnumyspace.co.uk/KV6002/Assessment/api/userlogin\"\r\n\r\n        let formData = new FormData();\r\n        formData.append('user_email', this.state.email);\r\n        formData.append('user_password', this.state.password);\r\n\r\n        fetch(url, {\r\n            method: 'POST',\r\n            headers: new Headers(),\r\n            body: formData\r\n        })\r\n            .then((response) => {\r\n                if (response.status === 200) {\r\n                    return response.json()\r\n                } else {\r\n                    throw Error(response.statusText)\r\n                }\r\n            })\r\n            .then((data) => {\r\n                if (\"token\" in data.results) {\r\n                    this.setState(\r\n                        {\r\n                            authenticated: true,\r\n                            token: data.results.token\r\n                        }\r\n                    )\r\n\r\n                    localStorage.setItem('UserLoginToken', data.results.token);\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"something went wrong \", err)\r\n            }\r\n            );\r\n    }\r\n\r\n    render() {\r\n        let page = (\r\n            <Box sx={{ flexGrow: 1 }}>\r\n                <Grid container spacing={2}>\r\n                    <Grid item xs={12}>\r\n                        <h1>Login</h1>\r\n                        <h2>Please enter your details to log into your account.</h2>\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                    </Grid>\r\n                    <Grid item xs={4} sx={{ justifyContent: 'center' }}>\r\n                        <Login\r\n                            handleEmail={this.handleEmail}\r\n                            handlePassword={this.handlePassword}\r\n                            handleLoginClick={this.handleLoginClick}\r\n                        />\r\n                        <RegisterLink />\r\n                    </Grid>\r\n                    <Grid item xs={4}>\r\n                    </Grid>\r\n                </Grid>\r\n                <TwitchEmbed\r\n                    channel=\"moonstar_x\"\r\n                    id=\"moonstar_x\"\r\n                    theme=\"dark\"\r\n                    muted\r\n                    onVideoPause={() => console.log(':(')}\r\n                />\r\n                <TwitchChat channel=\"moonstar_x\" theme=\"dark\" />\r\n                <TwitchClip clip=\"WealthyBumblingKimchiItsBoshyTime\" parent={['mycoolsite.com, anotherawesomesite.net']} />\r\n                <TwitchPlayer video=\"333014765\" />\r\n            </Box>\r\n        )\r\n        if (this.state.authenticated) {\r\n            page = (\r\n                <div>\r\n                    <h1>You're logged in, let's get gaming!</h1>\r\n                    <Logout handleLogoutClick={this.handleLogoutClick} />\r\n                </div>\r\n            )\r\n        }\r\n        return (\r\n            <div>{page}</div>\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}