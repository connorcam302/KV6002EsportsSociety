{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Connor\\\\Documents\\\\School\\\\University\\\\Third Year\\\\Team Project\\\\KV6002EsportsSociety\\\\website\\\\src\\\\components\\\\LoginPage.js\";\nimport React from \"react\";\nimport Login from \"./Login\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleEmail = e => {\n      this.setState({\n        email: e.target.value\n      });\n    };\n\n    this.handlePassword = e => {\n      this.setState({\n        password: e.target.value\n      });\n    };\n\n    this.handleLogoutClick = () => {\n      this.setState({\n        authenticated: false,\n        token: null\n      });\n      localStorage.removeItem('LoginToken');\n    };\n\n    this.handleLoginClick = () => {\n      let url = \"http://unn-w18001798.newnumyspace.co.uk/KV6002/Assessment/api/userlogin\";\n      let formData = new FormData();\n      formData.append('user_email', this.state.email);\n      formData.append('user_password', this.state.password);\n      fetch(url, {\n        method: 'POST',\n        headers: new Headers(),\n        body: formData\n      }).then(response => {\n        if (response.status === 200) {\n          return response.json();\n        } else {\n          throw Error(response.statusText);\n        }\n      }).then(data => {\n        if (\"token\" in data.results) {\n          this.setState({\n            authenticated: true,\n            token: data.results.token\n          });\n          localStorage.setItem('UserLoginToken', data.results.token);\n        }\n      }).catch(err => {\n        console.log(\"something went wrong \", err);\n      });\n    };\n\n    this.state = {\n      admin: false,\n      authenticated: false,\n      token: null,\n      email: \"\",\n      password: \"\"\n    };\n    this.handleEmail = this.handleEmail.bind(this);\n    this.handlePassword = this.handlePassword.bind(this);\n    this.handleLoginClick = this.handleLoginClick.bind(this);\n    this.handleLogoutClick = this.handleLogoutClick.bind(this);\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('LoginToken')) {\n      this.setState({\n        authenticated: true,\n        token: localStorage.getItem('LoginToken')\n      });\n    }\n  }\n\n  render() {\n    let page = /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Please enter your details to log into your account.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Login, {\n        handleEmail: this.handleEmail,\n        handlePassword: this.handlePassword,\n        handleLoginClick: this.handleLoginClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: page\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default LoginPage;","map":{"version":3,"sources":["C:/Users/Connor/Documents/School/University/Third Year/Team Project/KV6002EsportsSociety/website/src/components/LoginPage.js"],"names":["React","Login","LoginPage","Component","constructor","props","handleEmail","e","setState","email","target","value","handlePassword","password","handleLogoutClick","authenticated","token","localStorage","removeItem","handleLoginClick","url","formData","FormData","append","state","fetch","method","headers","Headers","body","then","response","status","json","Error","statusText","data","results","setItem","catch","err","console","log","admin","bind","componentDidMount","getItem","render","page"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Login from \"./Login\";\r\n\r\n\r\nclass LoginPage extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            admin: false,\r\n            authenticated: false,\r\n            token: null,\r\n            email: \"\",\r\n            password: \"\"\r\n        }\r\n        this.handleEmail = this.handleEmail.bind(this);\r\n        this.handlePassword = this.handlePassword.bind(this);\r\n        this.handleLoginClick = this.handleLoginClick.bind(this);\r\n        this.handleLogoutClick = this.handleLogoutClick.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (localStorage.getItem('LoginToken')) {\r\n            this.setState({\r\n                authenticated: true,\r\n                token: localStorage.getItem('LoginToken')\r\n            });\r\n        }\r\n    }\r\n\r\n    handleEmail = (e) => {\r\n        this.setState({ email: e.target.value})\r\n    }\r\n\r\n    handlePassword = (e) => {\r\n        this.setState({ password: e.target.value})\r\n    }\r\n\r\n    handleLogoutClick = () => {\r\n        this.setState(\r\n            {\r\n                authenticated: false,\r\n                token: null\r\n            }\r\n        )\r\n        localStorage.removeItem('LoginToken');\r\n    }\r\n\r\n    handleLoginClick = () => {\r\n        let url = \"http://unn-w18001798.newnumyspace.co.uk/KV6002/Assessment/api/userlogin\"\r\n\r\n        let formData = new FormData();\r\n        formData.append('user_email', this.state.email);\r\n        formData.append('user_password', this.state.password);\r\n\r\n        fetch(url, {\r\n            method: 'POST',\r\n            headers: new Headers(),\r\n            body: formData\r\n        })\r\n            .then((response) => {\r\n                if (response.status === 200) {\r\n                    return response.json()\r\n                } else {\r\n                    throw Error(response.statusText)\r\n                }\r\n            })\r\n            .then((data) => {\r\n                if (\"token\" in data.results) {\r\n                    this.setState(\r\n                        {\r\n                            authenticated: true,\r\n                            token: data.results.token\r\n                        }\r\n                    )\r\n\r\n                    localStorage.setItem('UserLoginToken', data.results.token);\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log(\"something went wrong \", err)\r\n            }\r\n            );\r\n    }\r\n\r\n    render(){\r\n        let  page = ( \r\n            <div>\r\n                <h1>Login</h1>\r\n                <h2>Please enter your details to log into your account.</h2>\r\n                <Login\r\n                handleEmail={this.handleEmail}\r\n                handlePassword={this.handlePassword}\r\n                handleLoginClick={this.handleLoginClick}\r\n                />\r\n            </div>\r\n        )\r\n        return (\r\n            <div>{page}</div>\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}